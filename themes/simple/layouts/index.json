{{ $items := slice }}
{{ range .Site.RegularPages }}
  {{ $description := "" }}

  {{ with .Description }}
    {{ $description = . }}
  {{ else }}
    {{ if .IsPage }}
      {{ $description = .Summary }}
    {{ else }}
      {{ with .Site.Params.description }}
        {{ $description = . }}
      {{ end }}
    {{ end }}
  {{ end }}

  {{ $items = $items | append (dict "url" .RelPermalink "title" .Title "description" $description) }}
{{ end }}

{{ dict "data" $items | jsonify }}
