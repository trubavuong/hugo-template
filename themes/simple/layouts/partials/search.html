{{ $is404Page := (eq .Kind "404") }}
{{ $isAlwaysVisible := or $is404Page (.Param `search.visible`) }}

<div class="search"{{ if (not $isAlwaysVisible) }} style="display:none"{{ end }}>
  <div class="search-header">
    <div class="search-buttons">
      <ul class="inline-list">
        <li>
          <a href="#" class="search-clear">Clear</a>
        </li>
        {{- if not $isAlwaysVisible -}}
          <li>
            <a href="#" class="search-close">Close</a>
          </li>
        {{- end -}}
      </ul>
    </div>

    <input type="text" placeholder="{{ .Site.Params.search.placeholder | default `Search...` }}" class="search-input">
  </div>

  <div class="search-results"></div>
</div>
